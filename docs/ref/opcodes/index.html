<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">CLVM Reference Manual | Chialisp</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="CLVM Reference Manual | Chialisp"><meta data-react-helmet="true" name="description" content="The clvm is a small, tightly defined VM that defines the semantics of CLVM programs run during Chia blockchain validation. It serves as a target language for higher level languages targeting CLVM, especially ChiaLisp."><meta data-react-helmet="true" property="og:description" content="The clvm is a small, tightly defined VM that defines the semantics of CLVM programs run during Chia blockchain validation. It serves as a target language for higher level languages targeting CLVM, especially ChiaLisp."><meta data-react-helmet="true" property="og:url" content="https://chialisp.com/docs/ref/opcodes"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://chialisp.com/docs/ref/opcodes"><link rel="stylesheet" href="/styles.b794d89b.css">
<link rel="preload" href="/styles.8fd1aa9c.js" as="script">
<link rel="preload" href="/runtime~main.d2f90484.js" as="script">
<link rel="preload" href="/main.38d5d74e.js" as="script">
<link rel="preload" href="/1.174d8ed4.js" as="script">
<link rel="preload" href="/2.9ec3edcc.js" as="script">
<link rel="preload" href="/3.67d3266b.js" as="script">
<link rel="preload" href="/1be78505.fd9da14b.js" as="script">
<link rel="preload" href="/21.6b0fd9c9.js" as="script">
<link rel="preload" href="/20ac7829.93204fbe.js" as="script">
<link rel="preload" href="/17896441.b7f4ca2d.js" as="script">
<link rel="preload" href="/e2f3f033.814b81be.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Chialisp Logo"><strong class="navbar__title">Chialisp</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://chia.net/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://chia.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chia.net</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Chia-Network/chialisp-web" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Chialisp Logo"><strong class="navbar__title">Chialisp</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://chia.net/blog" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a href="https://chia.net" target="_blank" rel="noopener noreferrer" class="menu__link">Chia.net</a></li><li class="menu__list-item"><a href="https://github.com/Chia-Network/chialisp-web" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Chialisp</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">1 - CLVM Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/doc2">2 - Coins, Spends and Wallets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/doc3">3 - Deeper into CLVM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/doc4">4 - The High Level Language, Compiler, and Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/doc5">The Great Chia Glossary</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">CLVM</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ref/serialization">1 - Serialization</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/ref/opcodes">2 - Opcodes</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">FAQ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/faq">ChiaLisp and CLVM FAQ</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">CLVM Reference Manual</h1></header><div class="markdown"><p>The clvm is a small, tightly defined VM that defines the semantics of CLVM programs run during Chia blockchain validation. It serves as a target language for higher level languages targeting CLVM, especially ChiaLisp.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="definitions"></a>Definitions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#definitions" title="Direct link to heading">#</a></h2><ul><li><strong>Atom</strong> - The underlying data type in the CLVM. Atoms are immutable byte arrays. Atoms are untyped and are used to encode all strings, integers, and keys. The only things in the CLVM which are not atoms are cons pairs.</li><li><strong>cons pair</strong> - An immutable ordered pair of references to other CLVM objects.</li><li><strong>nil</strong> - nil is the special value consisting of a string of length zero. The same value represents zero, null string, false, quote, empty list, and nil. Nil can be represented as <code>()</code>, <code>0</code>, <code>&#x27;&#x27;</code>, or <code>nil</code>. The <code>nil</code> name refers to its use in the right cell of the last cons pair of a list to signal the end of the list.</li><li><strong>Value</strong> - We use value to mean an abstract value like <code>1</code> (an integer), <code>0xCAFE</code> (a byte string), <code>&quot;hello&quot;</code> (a string) or <code>(sha256 (q &quot;hello&quot;))</code> (a program). Values are represented by CLVM Objects.</li><li><strong>CLVM Object</strong> - An atom or cons pair and everything recursively pointed to by it. CLVM objects can&#x27;t have contain circular references although they can contain redundant references into the same underlying object. Although redundant data structures can be created there&#x27;s no way for the CLVM language to tell whether two objects are the same reference or merely contain the same data (there is no &#x27;is&#x27; function) and there&#x27;s no way to represent them in the current human readable serialization format.</li><li><strong>List</strong> - CLVM lists follow the lisp convention of being either a cons pair which contains the first element on the left and the rest of the list on the right or a nil indicating end of the list/empty list. While this is in many cases a higher layer semantic convention it does factor in to how programs are executed.</li><li><strong>Function</strong> - A function in the CLVM is either a built-in opcode or a user-defined program.</li><li><strong>Operator</strong> - An opcode/string specifying a built-in function to use.</li><li><strong>Program</strong> - A CLVM object which can be executed. When a program is executed it&#x27;s passed a CLVM object as parameters and returns a CLVM object. On-chain programming involves a lot of usage of self-reference and what&#x27;s called eval() in other languages, which is safe in this context due to the total lack of side effects.</li><li><strong>Opcodes</strong> - The strings used for function lookup by the CLVM. Unknown opcodes either error out or return nil depending on the context, likely error out for mempool checking or local testing and return nil when validating the blockchain for consensus.</li><li><strong>Tree</strong> - A binary tree can be formed from cons pairs and atoms by allowing the right and left cells of a cons pair to hold either an atom, or a cons pair. Atoms are the leaves of the tree.</li><li>Function Parameter - All of the values in a list except the first. In the program <code>(+ (q 1) (q 2))</code>, the quoted atoms <code>1</code> and <code>2</code> are parameters to the operator <code>+</code></li><li><strong>Treearg</strong> - These are program arguments passed in from outside the program. They are referenced by integers.</li><li><strong>Argument</strong> - Outside the context of the CLVM, the term &quot;argument&quot; can mean &quot;program argument&quot; (the &quot;argv&quot; of the C language, for example), or &quot;function argument&quot;, among other things. Because of this potential confusion, we avoid using the term &quot;argument&quot; in this document. The context is especially important considering the way in which CLVM programs look up their program arguments.</li></ul><p>A CLVM program must have an unambigious definition and meaning, so that Chia block validation and consensus is deterministic.
Programs are treated as Merkle trees, which are uniquely identified by the hash at their root. The program hash can be used to verify that two programs are identical.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="human-readable-serialization"></a>Human readable serialization<a aria-hidden="true" tabindex="-1" class="hash-link" href="#human-readable-serialization" title="Direct link to heading">#</a></h1><p>Underlying CLVM objects contain atoms and cons pairs, but for convenience there&#x27;s a human readable string format. In particular this format is what&#x27;s passed in to brun. It isn&#x27;t used anywhere in blockchain validation and has no impact on consensus. There are multiple ways of encoding the same CLVM object in the human readable serialization format, so going backwards to pretty print a CLVM object in this format requires guessing as to the best representation.</p><p>Atoms in the human readable representation can be represented as directly quoted strings. They can also be expressed as integers which get converted to two&#x27;s complement minimal encoding length. Built-in opcodes map directly to specific strings.</p><p>Cons pairs can be represented using dot as an infix operator like so: <code>(3 . 4)</code> which corresponds to a cons box containing 3 and 4. A more common representation is for lists, which are done not using a dot and assume a nil terminator, for example <code>(3 4 5)</code> represents the same thing as <code>(3 . (4 . (5 . nil)))</code>. This can of course be used recursively as well. Note that <code>0</code>, <code>nil</code>, <code>false</code>, <code>&#x27;&#x27;</code>, <code>q</code>, and <code>()</code> all get parsed to the same value.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="program-evaluation"></a>Program Evaluation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#program-evaluation" title="Direct link to heading">#</a></h1><p>The semantics of the language implemented by the CLVM is similar to Lisp. A program is represented as a tree, and the root of the tree is the outermost thing getting called, with later/inner function calls embedded recursively inside of it.</p><p>Whenever a program is called it always has a context of a CLVM object which is the arguments passed in, referred to in the plural even though it&#x27;s technically a single object.</p><p>If the root of the program is an atom then an argument lookup is performed and returned. Please see <a href="#treeargs">treeargs</a>, below.</p><p>If the the root of the program is a cons pair then a function call is made and the result of that function call is returned. The object on the left determines the function to call and the object on the right determines what arguments it gets passed.</p><p>The left object is either an atom, in which case it&#x27;s treated as an opcode, or a cons pair, in which case it&#x27;s an implicit eval. The quote opcode is very special in that it&#x27;s recognized by the interpreter and causes whatever&#x27;s on the right to not be evaluated but instead returned verbatim. All other functions get passed the results of evaluating what&#x27;s on the right first. When the interpreter evaluates the right value it does so using the lisp list convention: It either encounters a nil, in which case it returns nil, in which case it returns nil, or it encounters a cons pair, in which case it returns a cons pair containing the result of a recursive call to evalute using the current argument context to the thing on the left and the result of recursing evaluation to the thing on the right.</p><p>If implicit evaluation is used then the value on the left is evaluated then it&#x27;s called getting passed the value from evaluating what&#x27;s on the right as context. This differs from recursive evaluation because it changes the argument context instead of that getting inherited. Note that if you want to run an argument passed in as a function you can&#x27;t specify which arg at the outermost position using an atom because that will be treated as an opcode lookup but you can work around the limitation by using first on a list of length one which will treat an atom as an arg lookup during evaluation.</p><p>A compiled CLVM program can be thought of as a binary tree.</p><p>Here is an example of a function invocation (&quot;function call&quot;). <code>(+ (q 1) (q 2))</code>. The function is the opcode <code>+</code>, a function built in to the clvm runtime.</p><p><code>(+ (q 1) (q 2))</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">      [ ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     /   \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    +     [ ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         /   \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      [q, 1]  [ ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             /   \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         [q, 2]  nil</span></div></div></div></div></div><p>After First Reduction</p><p><code>(+ 1 2)</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">      [ ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     /   \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    +     [ ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         /   \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        1     [ ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             /   \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            2    nil</span></div></div></div></div></div><p>After Second Reduction, and function application</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">3</span></div></div></div></div></div><p>Program trees are evaluated by first evaluating the leaf nodes, then their parents, recursively.
Arguments to functions are always evaluated before the function is called.
CLVM objects need not be evaluated in a specific order, but all child nodes must be evaluated before their parent.</p><p>If the item is a quoted value, the value is returned.</p><p>If the item is an atom, the atom is looked up as a Treearg.</p><p>If the item to be evaluated is a list, all of the parameters are evaluated and then the evaluatted parameters are passed to the function</p><p>All arguments of a function are evaluated before being passed to that function.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="types"></a>Types<a aria-hidden="true" tabindex="-1" class="hash-link" href="#types" title="Direct link to heading">#</a></h2><p>The two types of CLVM Object are <em>cons pair</em> and <em>atom</em>. They can be distinguished by the <strong>listp</strong> opcode. Atoms in the CLVM language do not carry other type information. However, similarly to the machine code instructions for a CPU, functions interpret atoms in specific predictible ways. Thus, each function imposes a type for each of its arguments.</p><p>The value of an atom - its length, and the values of its bytes - are always well defined. Because atoms have no type information, the meaning of an atom is determined when a function is applied to it. For example, an atom may be parsed as an integer, concatenated to another atom, and then treated as a BLS point.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="byte-array"></a>Byte Array<a aria-hidden="true" tabindex="-1" class="hash-link" href="#byte-array" title="Direct link to heading">#</a></h3><p>The atom is treated as an array of bytes, with a length. No specific semantics are assumed, except as specified in the instruction.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="unsigned-integer"></a>Unsigned Integer<a aria-hidden="true" tabindex="-1" class="hash-link" href="#unsigned-integer" title="Direct link to heading">#</a></h3><p>An unsigned integer of arbitrary length. If more bits are required to perform an operation with atoms of different length, the atom is virtually extended with zero bytes to the left.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="signed-integer"></a>Signed Integer<a aria-hidden="true" tabindex="-1" class="hash-link" href="#signed-integer" title="Direct link to heading">#</a></h3><p>The byte array behaves as a two&#x27;s complement signed integer. The most significant bit denotes a negative number. The underlying representation matters, because the individual bytes are viewable through other operations.</p><p>This type has the potential for multiple representations to be treated as the same value. For example, 0xFF and 0xFFFF both encode <code>-1</code>. Integer arithmetic operations that treat returned atoms as signed integers will return the minimal representation for negative numbers, eg. <code>0xFF</code> for <code>-1</code></p><p>These integers are byte-aligned. For example, <code>0xFFF</code> is interpreted as <code>4095</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="bls-point"></a>BLS Point<a aria-hidden="true" tabindex="-1" class="hash-link" href="#bls-point" title="Direct link to heading">#</a></h3><p>This type represents a point on an elliptic curve over finite field described <a href="https://electriccoin.co/blog/new-snark-curve/" target="_blank" rel="noopener noreferrer">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="treeargs--program-arguments-and-argument-lookup"></a>Treeargs : Program Arguments, and Argument Lookup<a aria-hidden="true" tabindex="-1" class="hash-link" href="#treeargs--program-arguments-and-argument-lookup" title="Direct link to heading">#</a></h2><p>For a program running on a deterministic machine to have different behaviours, it must be able to take take have different starting states. The starting state for a CLVM program is the program argument list - the treearg.</p><p>When an unquoted integer is evaluated, it is replaced with the corresponding value/CLVM Object from the program Treearg.</p><p>As an improvement over walking the argument tree via calls to <strong>first</strong> and <strong>rest</strong>, arguments are indexed from the argument list by their argument number. This number is derived by translating the path of left and right nodes through the argument tree into a series of ones and zeros corresponding to the path to the CLVM Object in the argument tree, starting at the least significant bit. The number of the root of the argument tree is <code>1</code> (<code>0</code> will also evaluate to the root of the argtree).</p><p>We treat an s-expression as a binary tree, where leaf nodes are atoms, and cons pairs
are nodes with two children. We then number the paths as follows:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">              1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             / \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            /   \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           /     \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          /       \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         /         \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        /           \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       2             3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      / \           / \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     /   \         /   \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    4      6      5     7</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   / \    / \    / \   / \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  8   12 10  14 9  13 11  15</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">etc.</span></div></div></div></div></div><p>This quirky numbering makes the implementation simple.
It starts at the argument passed in, and if the index is 1 it returns args directly otherwise
it uses the lest significant bit to decide whether to recurse left or right and and right
shifts the index one bit.</p><p>See the implementation <a href="https://github.com/Chia-Network/clvm_tools/blob/master/clvm_tools/NodePath.py" target="_blank" rel="noopener noreferrer">here</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="quoting"></a>Quoting<a aria-hidden="true" tabindex="-1" class="hash-link" href="#quoting" title="Direct link to heading">#</a></h2><p>In most programming languages, evaluating a literal returns the evaluated value itself.
In CLVM, the meaning of an atom at evaluation time is a reference to a value in the argument tree.</p><p>Therefore, when you intend to write:</p><p><code>(+ 1 2)</code> =&gt; <code>3</code></p><p>You must instead write:
<code>(+ (q 1) (q 2))</code> =&gt; <code>3</code></p><p>nil is self-quoting.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="compilation-atom-syntax"></a>Compilation: Atom Syntax<a aria-hidden="true" tabindex="-1" class="hash-link" href="#compilation-atom-syntax" title="Direct link to heading">#</a></h3><p>Although there is only one underlying representation of an atom, different syntaxes are recognized during compile time, and those atom syntaxes are interpreted differently during the translation from program text to CLVM Objects.</p><p>Nil, decimal zero and the empty string all evaluate to the same atom.</p><p><code>(q ())</code> =&gt; <code>()</code></p><p><code>(q 0)</code> =&gt; <code>()</code></p><p><code>(q &quot;&quot;)</code> =&gt; <code>()</code></p><p>which is not the same as a sigle zero byte.</p><p><code>(q 0x0)</code> =&gt; <code>0x00</code></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="equivalence-of-strings-symbols-hex-strings-and-numbers"></a>Equivalence of Strings, symbols, hex strings, and numbers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#equivalence-of-strings-symbols-hex-strings-and-numbers" title="Direct link to heading">#</a></h4><p><code>&quot;A&quot;</code> is the same atom as <code>A</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(q &quot;A&quot;) =&gt; 65</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(q A) =&gt; 65</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(q 65) =&gt; 65</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(q 0x41) =&gt; 65</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><p>However, the same is not true for Built-ins.
<code>&quot;q&quot;</code> is not the same as <code>q</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(q q) =&gt; 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(q &quot;q&quot;) =&gt; 113</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="errors"></a>Errors<a aria-hidden="true" tabindex="-1" class="hash-link" href="#errors" title="Direct link to heading">#</a></h2><p>While running a clvm program, checks are made to ensure the CLVM does not enter an undefined state. When a program violates one of these runtime checks, it is said to have caused an error.</p><p>TODO We need the full list of errors.</p><ul><li>First element in an evaluated list is not a valid function. Example: <code>(&quot;hello&quot; (q 1))</code> =&gt; <code>FAIL: unimplemented operator &quot;hello&quot;</code></li><li>Wrong number of arguments. Example: <code>(lognot (q 1) (q 2))</code> =&gt; <code>FAIL: lognot requires 1 arg</code></li><li>Program evaluation exceeds max cost see <a href="/docs/ref/opcodes#costs">Costs</a></li><li>Too many allocations have been performed</li></ul><p>An error will cause the program to abort.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="operator-summary"></a>Operator Summary<a aria-hidden="true" tabindex="-1" class="hash-link" href="#operator-summary" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="the-built-in-opcodes"></a>The built-in opcodes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-built-in-opcodes" title="Direct link to heading">#</a></h2><p>Opcodes are functions built in to the CLVM. They are available to any running program.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="list-operators"></a>List Operators<a aria-hidden="true" tabindex="-1" class="hash-link" href="#list-operators" title="Direct link to heading">#</a></h2><p><strong>c</strong> <em>cons</em> <code>(c A B)</code> takes exactly two operands and returns a cons pair with the two objects in it (A in the left, B in the right)</p><p>Example: <code>&#x27;(c (q &quot;A&quot;) (q ()))&#x27;</code> =&gt; <code>(65)</code></p><p><strong>f</strong> <em>first</em> <code>(f X)</code> takes exactly one operand which must be a cons pair, and returns the left half</p><p><strong>r</strong> <em>rest</em> <code>(r X)</code> takes exactly one operand which must be a cons pair, and returns the right half</p><p><strong>l</strong> <em>listp</em> <code>(l X)</code> takes exactly one operand and returns <code>()</code> if it is an atom or <code>1</code> if it is a cons pair. In contrast to most other lisps, nil is not a list in CLVM.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="control-flow"></a>Control Flow<a aria-hidden="true" tabindex="-1" class="hash-link" href="#control-flow" title="Direct link to heading">#</a></h2><p><strong>i</strong> <em>if</em> <code>(i A B C)</code> takes exactly three operands <code>A</code>, <code>B</code>, <code>C</code>. If <code>A</code> is <code>()</code>, return <code>C</code>. Otherwise, return <code>B</code>. Both B and C are evaluated before <em>if</em> is evaluated.</p><p><strong>x</strong> <em>raise</em> <code>(x X Y ...)</code> takes an arbitrary number of arguments (even zero). Immediately fail, with the argument list passed up into the (python) exception. No other CLVM instructions are run after this instruction is evaluated.</p><p><strong>=</strong> <em>equal</em> <code>(= A B)</code> returns 1 if <code>A</code> and <code>B</code> are both atoms and both equal. Otherwise <code>()</code>. Do not use this to test if two programs are identical. Use <strong>sha256tree</strong>. Nil tests equal to zero, but nil is not equal to a single zero byte.</p><p><strong>&gt;</strong> <em>greater than</em> <code>(&gt; A B)</code> returns 1 if <code>A</code> and <code>B</code> are both atoms and A is greater than B, interpreting both as two&#x27;s complement signed integers. Otherwise <code>()</code>. <code>(&gt; A B)</code> means <code>A &gt; B</code> in infix syntax.</p><p><strong>&gt;s</strong> <em>greater than bytes</em> <code>(&gt;s A B)</code> returns 1 if <code>A</code> and <code>B</code> are both atoms and A is greater than B, interpreting both as an array of unsigned bytes. Otherwise <code>()</code>. Compare to strcmp.
<code>(&gt;s &quot;a&quot; &quot;b&quot;)</code> =&gt; <code>()</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="constants"></a>Constants<a aria-hidden="true" tabindex="-1" class="hash-link" href="#constants" title="Direct link to heading">#</a></h2><p><strong>q</strong> <em>quote</em> <code>(q X)</code> takes exactly one operand which is <em>not</em> evaluated and returns it
Example: <code>(q &quot;A&quot;)</code> =&gt; <code>(65)</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="integer-operators"></a>Integer Operators<a aria-hidden="true" tabindex="-1" class="hash-link" href="#integer-operators" title="Direct link to heading">#</a></h2><p>The arithmetic operators <code>+</code>, <code>-</code>, <code>*</code> and <code>divmod</code> treat their arguments as signed integers.</p><p><strong><code>+</code></strong> <code>(+ a0 a1 ...)</code> takes any number of integer operands and sums them. If given no arguments, zero is returned.</p><p><strong><code>-</code></strong> <code>(- a0 a1 ...)</code> takes one or more integer operands and adds a0 to the negative of the rest. Giving zero arguments returns 0.</p><p><strong><code>*</code></strong> <code>(* a0 a1 ...)</code> takes any number of integer operands and returns the product.</p><p><strong>divmod</strong> <code>(divmod A B)</code> takes two integers and returns a list containing the floored quotient and the remainder</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="bit-operations"></a>Bit Operations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#bit-operations" title="Direct link to heading">#</a></h2><p>logand, logior and logxor operate on any number of arguments
If any argument is nil, they return nil. Fail if either A or B is not an atom.
The shorter atom is considered to be extended with zero bytes until equal in length to the longer atom.</p><p><strong>logand</strong> <code>(logand A B ...)</code> bitwise <strong>AND</strong> of one or more atoms. Given zero arguments, returns <code>-1</code>.</p><p><strong>logior</strong> <code>(logior A B ...)</code> bitwise logical <strong>OR</strong> of one or more atoms. Given zero arguments, returns zero.</p><p><strong>logxor</strong> <code>(logxor A B)</code> bitwise <strong>XOR</strong> of any number of atoms. Given zero arguments, returns zero.</p><p><strong>lognot</strong> <code>(lognot A)</code> bitwise <strong>NOT</strong> of A. All bits are inverted.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="shifts"></a>Shifts<a aria-hidden="true" tabindex="-1" class="hash-link" href="#shifts" title="Direct link to heading">#</a></h2><p><strong>ash</strong> <code>(ash A B)</code> if B is positive, return Arithmetic shift A &lt;&lt; B. Else returns A &gt;&gt; |B|. <em>ash</em> sign extends.</p><p><strong>lsh</strong> <code>(lsh A B)</code> if B is positive, Logical shift A by B bits left. Else Logical shift A &gt;&gt; |B|. Zeros are inserted into the vacated bits.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="strings"></a>Strings<a aria-hidden="true" tabindex="-1" class="hash-link" href="#strings" title="Direct link to heading">#</a></h2><p><strong>substr</strong> <code>(substr S I1 I2)</code> return an atom containing bytes indexed from I1 to I2. The MSB of S is byte zero. If I1 == I2, returns nil.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(substr (q &quot;clvm&quot;) (q 0) (q 4)) =&gt; clvm</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(substr (q &quot;clvm&quot;) (q 2) (q 4)) =&gt; vm</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(substr (q &quot;clvm&quot;) (q 4) (q 4)) =&gt; ()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(substr (q &quot;clvm&quot;) (q 4) (q 5)) =&gt; FAIL</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(substr (q &quot;clvm&quot;) (q 1) (q 0)) =&gt; FAIL</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(substr (q &quot;clvm&quot;) (q -1) (q 4)) =&gt; FAIL</span></div></div></div></div></div><p><strong>strlen</strong> <code>(strlen S)</code> return the number of bytes in S.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(strlen (q &quot;clvm&quot;)) =&gt; 4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(strlen (q &quot;0x0&quot;)) =&gt; 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(strlen (q &quot;&quot;)) =&gt; ()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(strlen (q 0)) =&gt; ()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(strlen (q ())) =&gt; ()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(strlen ()) =&gt; ()</span></div></div></div></div></div><p><strong>concat</strong> <code>(concat A ...)</code> return the concatenation of any number of atoms.</p><p>Example: <code>(concat (q &quot;Hello&quot;) (q &quot; &quot;) (q &quot;world&quot;))</code> =&gt; <code>&quot;Hello world&quot;</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streaming-operators"></a>Streaming Operators<a aria-hidden="true" tabindex="-1" class="hash-link" href="#streaming-operators" title="Direct link to heading">#</a></h2><p><strong>sha256</strong>
<code>(sha256 A ...)</code> returns the sha256 hash (as a 32-byte blob) of the bytes of its parameters.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(sha256 (q &quot;clvm&quot;)) =&gt; 0xcf3eafb281c0e0e49e19c18b06939a6f7f128595289b08f60c68cef7c0e00b81</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(sha256 (q &quot;cl&quot;) (q &quot;vm&quot;)) =&gt; 0xcf3eafb281c0e0e49e19c18b06939a6f7f128595289b08f60c68cef7c0e00b81</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ecdsa-operators"></a>ECDSA operators<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ecdsa-operators" title="Direct link to heading">#</a></h2><p><strong>point_add</strong>
<code>(point_add a0 a1 ...)</code> takes an arbitrary number of bls12_381 points and adds them</p><p>Example: <code>(point_add (pubkey_for_exp (q 1)) (pubkey_for_exp (q 2)))</code> =&gt; <code>0x89ece308f9d1f0131765212deca99697b112d61f9be9a5f1f3780a51335b3ff981747a0b2ca2179b96d2c0c9024e5224</code></p><p><strong>pubkey_for_exp</strong>
<code>(pubkey_for_exp A)</code> turns the integer A into a bls12_381 point</p><p><code>(pubkey_for_exp (q 1))</code> =&gt; <code>0x97f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="arithmetic-and-bitwise-identities"></a>Arithmetic and Bitwise Identities<a aria-hidden="true" tabindex="-1" class="hash-link" href="#arithmetic-and-bitwise-identities" title="Direct link to heading">#</a></h2><p>Some operators have a special value that is returned when they are called with zero arguments. This value is the identity of that function.</p><table><thead><tr><th>Operator</th><th>Identity</th></tr></thead><tbody><tr><td><code>+</code></td><td>0</td></tr><tr><td><code>*</code></td><td>1</td></tr><tr><td>AND</td><td>all 1&#x27;s</td></tr><tr><td>OR</td><td>all zeros</td></tr><tr><td>XOR</td><td>all zeros</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="arithmetic"></a>Arithmetic<a aria-hidden="true" tabindex="-1" class="hash-link" href="#arithmetic" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="behaviour-of-nil-when-used-as-an-integer"></a>Behaviour of nil when used as an integer<a aria-hidden="true" tabindex="-1" class="hash-link" href="#behaviour-of-nil-when-used-as-an-integer" title="Direct link to heading">#</a></h3><p>When used in an integer context, nil behaves as zero.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="behaviour-of-zero-when-used-as-a-value-that-may-be-checked-for-nil"></a>Behaviour of zero when used as a value that may be checked for nil<a aria-hidden="true" tabindex="-1" class="hash-link" href="#behaviour-of-zero-when-used-as-a-value-that-may-be-checked-for-nil" title="Direct link to heading">#</a></h3><p>When used as a parameter that may be checked for nil, zero is interpreted as nil.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="operator-specification"></a>Operator specification<a aria-hidden="true" tabindex="-1" class="hash-link" href="#operator-specification" title="Direct link to heading">#</a></h1><p>All documentation in the Opcode section omits the necessary quote operator around each literal.</p><p>If a precondition is not met, it is an error. Checking argument count is covered later in the document.</p><p>Conventions used in the Operator Table</p><ul><li>N: the number of arguments. For <code>(+ (q 1) (q 2))</code>, N = <code>2</code></li><li>strlen(atom): number of bytes in an atom.</li><li>max_arg_strlen: the length of the longest arg atom, in bytes</li><li>result: the return value of the function</li></ul><p>All opcodes below accept arguments as a <a href="/docs/ref/opcodes#definitions">flat list</a>.</p><table><thead><tr><th>keyword</th><th>opcode</th><th>impl</th><th>funcall</th><th>args</th><th>return</th><th>preconditions</th><th>cost</th><th>Allocations</th></tr></thead><tbody><tr><td>i</td><td>0x04</td><td>op_if</td><td>(i C A B)</td><td>3</td><td>if C==nil then B else A</td><td></td><td>10</td><td>None</td></tr><tr><td>c</td><td>0x05</td><td>op_cons</td><td>(c A B)</td><td>2</td><td>cons pair containing [A,B]</td><td></td><td>10</td><td>1 cons</td></tr><tr><td>f</td><td>0x06</td><td>op_first</td><td>(f L)</td><td>1</td><td>left cell of cons pair L</td><td>L is not atom</td><td>10</td><td>None</td></tr><tr><td>r</td><td>0x07</td><td>op_rest</td><td>(r L)</td><td>1</td><td>right cell of cons pair L</td><td>L is not atom</td><td>10</td><td>None</td></tr><tr><td>l</td><td>0x08</td><td>op_listp</td><td>(l A)</td><td>1</td><td>return 1 if A is a cons pair, else nil</td><td></td><td>20</td><td>None</td></tr><tr><td>x</td><td>0x09</td><td>op_raise</td><td>(x ...)</td><td>&gt;=0</td><td>stop program execution</td><td></td><td>N/A</td><td>None</td></tr><tr><td>=</td><td>0x0a</td><td>op_eq</td><td>(= A B)</td><td>2</td><td>if A == B then 1 else nil</td><td>A and B are atoms</td><td>len(A) + len(B)</td><td>None</td></tr><tr><td>sha256</td><td>0x0b</td><td>op_sha256</td><td>(sha256 ...)</td><td>&gt;=0</td><td>return sha256 of <em>concat</em> of args</td><td>All args are atoms</td><td>2 * len(args)</td><td>Atom(32)</td></tr><tr><td>+</td><td>0x0c</td><td>op_add</td><td>(+ A B ...)</td><td>&gt;=0</td><td>A + B + ...</td><td>All args are atoms</td><td>strlen(concat A B ...)) * 10</td><td>Atom(max(map(strlen, args)) + 1)</td></tr><tr><td>-</td><td>0x0d</td><td>op_subtract</td><td>(- A B ...)</td><td>&gt;=0</td><td>A + B + ...</td><td>All args are atoms</td><td>strlen(concat A B ...)) * 10</td><td>Atom(max(map(strlen, args)))</td></tr><tr><td><code>*</code></td><td>0x0e</td><td>op_multiply</td><td>(* A B ...)</td><td>&gt;=0</td><td>A <em> B </em> ...</td><td>All args are atoms</td><td>strlen(A) <em> strlen(B) </em> ... * 10</td><td></td></tr><tr><td>divmod</td><td>0x0f</td><td>op_divmod</td><td>(divmod A B)</td><td>2</td><td>((div A B) . (mod A B))</td><td>A and B are atoms</td><td>strlen(concat A B ...)) * 10</td><td>Atom(len(A) <em> len(B) </em> ...)</td></tr><tr><td>substr</td><td>0x10</td><td>op_substr</td><td>(substr S start end)</td><td>3</td><td>new atom with bytes from</td><td><ul><li>S is atom</li><li>start &lt;= end</li><li>start&gt;=0</li><li>end&gt;=0</li><li>end&lt;=len(S)</li></ul></td><td>1</td><td>Atom(len(S))</td></tr><tr><td>strlen</td><td>0x11</td><td>op_strlen</td><td>(strlen S)</td><td>1</td><td>length of atom S</td><td>S is atom</td><td>len(S)</td><td>None</td></tr><tr><td>point_add</td><td>0x12</td><td>op_point_add</td><td>(point_add P1 P2 ...)</td><td>&gt;=0</td><td>Sum any number, N, of G1 Elements</td><td>P[n] are 48 bytes in length</td><td>N * 32</td><td>Atom(96)</td></tr><tr><td>pubkey_for_exp</td><td>0x13</td><td>op_pubkey_for_exp</td><td>(pubkey_for_exp E)</td><td>1</td><td>Get pubkey for E</td><td>E is an atom</td><td>900</td><td>Atom(96)</td></tr><tr><td>concat</td><td>0x14</td><td>op_concat</td><td>(concat A B ...)</td><td>&gt;=0</td><td>Concatenate args</td><td>2 * (len(A) + len(B) + ...)</td><td>Atom(map(sum, arg_lens))</td><td></td></tr><tr><td>sha256tree</td><td>0x15</td><td>op_sha256tree</td><td>(sha256tree L)</td><td>1</td><td>Recursive sha256 of all leaf nodes of L</td><td></td><td>(len_of_all_atoms<em>10) + (Number of CLVM Objects </em> 10) TODO: Check</td><td>Atom(32)</td></tr><tr><td><code>&gt;</code></td><td>0x16</td><td>op_gr</td><td>(&gt; A B)</td><td>2</td><td>if A &gt; B then 1 else nil. Int conversion via Python&#x27;s <a href="https://docs.python.org/3/library/stdtypes.html#int.from_bytes" target="_blank" rel="noopener noreferrer">int.from_bytes</a></td><td>A and B are atoms</td><td><p style="color:red">10 * max(A,B)</p></td><td>None</td></tr><tr><td><code>&gt;s</code></td><td>0x17</td><td>op_gr_bytes</td><td>(&gt;s A B)</td><td>2</td><td>Unsigned greater than</td><td>A and B are atoms</td><td><p style="color:red">max(A,B)</p></td><td>None</td></tr><tr><td>logand</td><td>0x18</td><td>op_logand</td><td>(logand A B ...)</td><td>&gt;=0</td><td>Bitwise AND of args</td><td>All args are atoms</td><td>max_arg_strlen * 2</td><td>Atom(max(arg_lens))</td></tr><tr><td>logior</td><td>0x19</td><td>op_logior</td><td>(logior A B ...)</td><td>&gt;=0</td><td>Bitwise OR of args</td><td>All args are atoms</td><td>max_arg_strlen * 2</td><td>Atom(max(arg_lens))</td></tr><tr><td>logxor</td><td>0x1a</td><td>op_logxor</td><td>(logxor A B)</td><td>2</td><td>Bitwise XOR of args. The bit is 1 if that bit is 1 in an odd number of the arguments</td><td>All args are atoms</td><td>max_arg_strlen * 2</td><td>Atom(max(arg_lens))</td></tr><tr><td>lognot</td><td>0x1b</td><td>op_lognot</td><td>(lognot A)</td><td>1</td><td>Flip every bit in A</td><td>A is an atom</td><td>strlen(A)*2</td><td>Atom(len(A))</td></tr><tr><td>ash</td><td>0x1c</td><td>op_ash</td><td>(ash A B)</td><td>2</td><td>Arithmetic shift. if B &gt;= 0, A &lt;&lt; B. Else A &gt;&gt; abs(B). Shift in 1&#x27;s if right shifting a negative number</td><td>A and B are atoms</td><td>2 * (strlen(A) + strlen(result))</td><td>Atom(len(result))</td></tr><tr><td>lsh</td><td>0x1d</td><td>op_lsh</td><td>(lsh A B)</td><td>2</td><td>Unsigned shift. if B &gt;= 0, A &lt;&lt; B. Else A &gt;&gt; abs(B). Shift in 0&#x27;s in all cases</td><td>A and B are atoms</td><td>2 * (strlen(A) + strlen(result))</td><td>Atom(len(result))</td></tr><tr><td>softfork</td><td>0x1e</td><td>op_softfork</td><td>(softfork COST)</td><td>1</td><td></td><td>COST&gt;=1</td><td></td><td>None</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="detailed-behaviour-notes"></a>Detailed behaviour Notes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#detailed-behaviour-notes" title="Direct link to heading">#</a></h2><p><strong>ash</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(ash (q 1) (q 1)) =&gt; 2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(ash (q 1) (q -1)) =&gt; 0</span></div></div></div></div></div><p>Consecutive right shifts of negative numbers will result in a terminal value of -1.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(ash -7 -1) ; -7 = . . . 111111111111111111111111111001</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(ash -4 -1) ; -4 = . . . 111111111111111111111111111100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(ash -2 -1) ; -2 = . . . 111111111111111111111111111110</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(ash -1 -1) ; -1 = . . . 111111111111111111111111111111</span></div></div></div></div></div><p>That is, a right shift (negative shift count) of <code>-1</code> by any amount is <code>-1</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(ash (q -1) (q -99)) =&gt; -1</span></div></div></div></div></div><p><strong>lsh</strong></p><p>lsh behaviour from the <a href="https://www.gnu.org/software/emacs/manual/pdf/elisp.pdf" target="_blank" rel="noopener noreferrer">elisp manual</a>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(ash -7 -1) ; -7 = . . . 111111111111111111111111111001</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          â‡’ -4 ; = . . . 111111111111111111111111111100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(lsh -7 -1)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   â‡’ 536870908 ; = . . . 011111111111111111111111111100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(ash -5 -2) ; -5 = . . . 111111111111111111111111111011</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          â‡’ -2 ; = . . . 111111111111111111111111111110</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(lsh -5 -2)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   â‡’ 268435454 ; = . . . 001111111111111111111111111110</span></div></div></div></div></div><p>A left shift of an atom with the high bit set will extend the atom left, and result in an allocation</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(lsh (q -1) (q 1)) =&gt; 0x01FE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(strlen (lsh (q -1) (q 1))) =&gt; 2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><p>A left arithmetic shift will only extend the atom length when more bits are needed</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(strlen (ash (q -1) (q 7))) =&gt; 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(strlen (ash (q -1) (q 8))) = &gt;2</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(strlen (ash (q 255) (q 1)))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(strlen (ash (q 128) (q 1)))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(strlen (ash (q 127) (q 1)))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(strlen (lsh (q 255) (q 1)))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(strlen (lsh (q 128) (q 1)))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(strlen (lsh (q 127) (q 1)))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="costs"></a>Costs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#costs" title="Direct link to heading">#</a></h1><p>The minimum program cost is 40. After each opcode is run, its cost is added to the total program cost. When the cost exceeds a threshold, the program is terminated, and no value is returned.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="argument-checking-behaviour-with-fewer-or-more-args-than-required"></a>Argument Checking: Behaviour with fewer or more args than required<a aria-hidden="true" tabindex="-1" class="hash-link" href="#argument-checking-behaviour-with-fewer-or-more-args-than-required" title="Direct link to heading">#</a></h2><p>Some opcodes have strict argument requirements, and others will work with more arguments than required, ignoring additional arguments (eg. listp). Opcodes taking an unlimited number of arguments have not been checked in the table below.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="opcode-list"></a>Opcode List<a aria-hidden="true" tabindex="-1" class="hash-link" href="#opcode-list" title="Direct link to heading">#</a></h3><table><thead><tr><th>keyword</th><th>opcode</th><th>implementation</th></tr></thead><tbody><tr><td>q</td><td>0x01</td><td>NO IMPL</td></tr><tr><td>a</td><td>0x03</td><td>NO IMPL</td></tr><tr><td>i</td><td>0x04</td><td>op_if</td></tr><tr><td>c</td><td>0x05</td><td>op_cons</td></tr><tr><td>f</td><td>0x06</td><td>op_first</td></tr><tr><td>r</td><td>0x07</td><td>op_rest</td></tr><tr><td>l</td><td>0x08</td><td>op_listp</td></tr><tr><td>x</td><td>0x09</td><td>op_raise</td></tr><tr><td><code>=</code></td><td>0x0a</td><td>op_eq</td></tr><tr><td>sha256</td><td>0x0b</td><td>op_sha256</td></tr><tr><td><code>+</code></td><td>0x0c</td><td>op_add</td></tr><tr><td><code>-</code></td><td>0x0d</td><td>op_subtract</td></tr><tr><td><code>*</code></td><td>0x0e</td><td>op_multiply</td></tr><tr><td>divmod</td><td>0x0f</td><td>op_divmod</td></tr><tr><td>substr</td><td>0x10</td><td>op_substr</td></tr><tr><td>strlen</td><td>0x11</td><td>op_strlen</td></tr><tr><td>point_add</td><td>0x12</td><td>op_point_add</td></tr><tr><td>pubkey_for_exp</td><td>0x13</td><td>op_pubkey_for_exp</td></tr><tr><td>concat</td><td>0x14</td><td>op_concat</td></tr><tr><td>sha256tree</td><td>0x15</td><td>op_sha256tree</td></tr><tr><td><code>&gt;</code></td><td>0x16</td><td>op_gr</td></tr><tr><td><code>&gt;s</code></td><td>0x17</td><td>op_gr_bytes</td></tr><tr><td>logand</td><td>0x18</td><td>op_logand</td></tr><tr><td>logior</td><td>0x19</td><td>op_logior</td></tr><tr><td>logxor</td><td>0x1a</td><td>op_logxor</td></tr><tr><td>lognot</td><td>0x1b</td><td>op_lognot</td></tr><tr><td>ash</td><td>0x1c</td><td>op_ash</td></tr><tr><td>lsh</td><td>0x1d</td><td>op_lsh</td></tr><tr><td>softfork</td><td>0x1e</td><td>op_softfork</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="operator-results-when-called-with-zero-arguments"></a>Operator Results when called with zero arguments<a aria-hidden="true" tabindex="-1" class="hash-link" href="#operator-results-when-called-with-zero-arguments" title="Direct link to heading">#</a></h3><table><thead><tr><th>operator</th><th>value</th><th>brun return code</th></tr></thead><tbody><tr><td>i</td><td>FAIL: rest of non-cons ()</td><td>255</td></tr><tr><td>c</td><td>FAIL: first of non-cons ()</td><td>255</td></tr><tr><td>f</td><td>FAIL: first of non-cons ()</td><td>255</td></tr><tr><td>r</td><td>FAIL: first of non-cons ()</td><td>255</td></tr><tr><td>l</td><td>FAIL: first of non-cons ()</td><td>255</td></tr><tr><td>x</td><td>FAIL: clvm raise ()</td><td>255</td></tr><tr><td>=</td><td>FAIL: first of non-cons ()</td><td>255</td></tr><tr><td>sha256</td><td>0xe3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855</td><td>0</td></tr><tr><td><code>+</code></td><td>()</td><td>0</td></tr><tr><td><code>-</code></td><td>cannot unpack non-iterable SExp object</td><td>1</td></tr><tr><td><code>*</code></td><td>1</td><td>0</td></tr><tr><td>divmod</td><td>FAIL: divmod requires 2 args ()</td><td>255</td></tr><tr><td>substr</td><td>FAIL: first of non-cons ()</td><td>255</td></tr><tr><td>strlen</td><td>FAIL: first of non-cons ()</td><td>255</td></tr><tr><td>point_add</td><td>0xc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</td><td>0</td></tr><tr><td>pubkey_for_exp</td><td>FAIL: pubkey_for_exp requires 1 arg ()</td><td>255</td></tr><tr><td>concat</td><td>()</td><td>0</td></tr><tr><td>sha256tree</td><td>FAIL: op_sha256tree expects exactly one argument ()</td><td>255</td></tr><tr><td><code>&gt;</code></td><td>FAIL: &gt; requires 2 args ()</td><td>255</td></tr><tr><td><code>&gt;s</code></td><td>FAIL: &gt;s requires 2 args ()</td><td>255</td></tr><tr><td>logand</td><td>-1</td><td>0</td></tr><tr><td>logior</td><td>()</td><td>0</td></tr><tr><td>logxor</td><td>()</td><td>0</td></tr><tr><td>lognot</td><td>FAIL: lognot requires 1 arg ()</td><td>255</td></tr><tr><td>ash</td><td>FAIL: ash requires 2 args ()</td><td>255</td></tr><tr><td>lsh</td><td>FAIL: ash requires 2 args ()</td><td>255</td></tr><tr><td>softfork</td><td>FAIL: first of non-cons ()</td><td>255</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="operator-results-when-called-with-fewer-than-minimum-arguments"></a>Operator Results when called with fewer than minimum arguments<a aria-hidden="true" tabindex="-1" class="hash-link" href="#operator-results-when-called-with-fewer-than-minimum-arguments" title="Direct link to heading">#</a></h3><table><thead><tr><th>program</th><th>value</th><th>brun return code</th></tr></thead><tbody><tr><td>(i  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>65</td><td>0</td></tr><tr><td>(c  (q &quot;A&quot;) )</td><td>FAIL: first of non-cons ()</td><td>255</td></tr><tr><td>(f )</td><td>FAIL: first of non-cons ()</td><td>255</td></tr><tr><td>(r )</td><td>FAIL: first of non-cons ()</td><td>255</td></tr><tr><td>(l )</td><td>FAIL: first of non-cons ()</td><td>255</td></tr><tr><td>(x )</td><td>FAIL: clvm raise ()</td><td>255</td></tr><tr><td>(=  (q &quot;A&quot;) )</td><td>FAIL: first of non-cons ()</td><td>255</td></tr><tr><td>(sha256 )</td><td>0xe3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855</td><td>0</td></tr><tr><td>(+ )</td><td>()</td><td>0</td></tr><tr><td>(- )</td><td>cannot unpack non-iterable SExp object</td><td>1</td></tr><tr><td>(* )</td><td>1</td><td>0</td></tr><tr><td>(divmod  (q &quot;A&quot;) )</td><td>FAIL: divmod requires 2 args (65)</td><td>255</td></tr><tr><td>(substr  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>FAIL: substr requires 2 args (65)</td><td>255</td></tr><tr><td>(strlen )</td><td>FAIL: first of non-cons ()</td><td>255</td></tr><tr><td>(point_add )</td><td>0xc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</td><td>0</td></tr><tr><td>(pubkey_for_exp )</td><td>FAIL: pubkey_for_exp requires 1 arg ()</td><td>255</td></tr><tr><td>(concat )</td><td>()</td><td>0</td></tr><tr><td>(sha256tree )</td><td>FAIL: op_sha256tree expects exactly one argument ()</td><td>255</td></tr><tr><td>(&gt;  (q &quot;A&quot;) )</td><td>FAIL: &gt; requires 2 args (65)</td><td>255</td></tr><tr><td>(&gt;s  (q &quot;A&quot;) )</td><td>FAIL: &gt;s requires 2 args (65)</td><td>255</td></tr><tr><td>(logand )</td><td>-1</td><td>0</td></tr><tr><td>(logior )</td><td>()</td><td>0</td></tr><tr><td>(logxor )</td><td>()</td><td>0</td></tr><tr><td>(lognot )</td><td>FAIL: lognot requires 1 arg ()</td><td>255</td></tr><tr><td>(ash  (q &quot;A&quot;) )</td><td>FAIL: ash requires 2 args (65)</td><td>255</td></tr><tr><td>(lsh  (q &quot;A&quot;) )</td><td>FAIL: ash requires 2 args (65)</td><td>255</td></tr><tr><td>(softfork )</td><td>FAIL: first of non-cons ()</td><td>255</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="operator-results-when-called-with-too-many-arguments"></a>Operator Results when called with too many arguments<a aria-hidden="true" tabindex="-1" class="hash-link" href="#operator-results-when-called-with-too-many-arguments" title="Direct link to heading">#</a></h3><table><thead><tr><th>operator</th><th>value</th><th>brun return code</th></tr></thead><tbody><tr><td>(i  (q &quot;A&quot;)  (q &quot;A&quot;)  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>65</td><td>0</td></tr><tr><td>(c  (q &quot;A&quot;)  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>(65 . 65)</td><td>0</td></tr><tr><td>(f  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>FAIL: first of non-cons 65</td><td>255</td></tr><tr><td>(r  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>FAIL: rest of non-cons 65</td><td>255</td></tr><tr><td>(l  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>()</td><td>0</td></tr><tr><td>none</td><td>Untested.</td><td>none</td></tr><tr><td>(=  (q &quot;A&quot;)  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>1</td><td>0</td></tr><tr><td>none</td><td>Untested.</td><td>none</td></tr><tr><td>none</td><td>Untested.</td><td>none</td></tr><tr><td>none</td><td>Untested.</td><td>none</td></tr><tr><td>none</td><td>Untested.</td><td>none</td></tr><tr><td>(divmod  (q &quot;A&quot;)  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>FAIL: divmod requires 2 args (65 65 65)</td><td>255</td></tr><tr><td>(substr  (q &quot;A&quot;)  (q &quot;A&quot;)  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>FAIL: substr requires 2 args (65 65 65)</td><td>255</td></tr><tr><td>(strlen  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>1</td><td>0</td></tr><tr><td>none</td><td>Untested.</td><td>none</td></tr><tr><td>(pubkey_for_exp  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>FAIL: pubkey_for_exp requires 1 arg (65 65)</td><td>255</td></tr><tr><td>none</td><td>Untested.</td><td>none</td></tr><tr><td>(sha256tree  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>FAIL: op_sha256tree expects exactly one argument (65 65)</td><td>255</td></tr><tr><td>(&gt;  (q &quot;A&quot;)  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>FAIL: &gt; requires 2 args (65 65 65)</td><td>255</td></tr><tr><td>(&gt;s  (q &quot;A&quot;)  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>FAIL: &gt;s requires 2 args (65 65 65)</td><td>255</td></tr><tr><td>none</td><td>Untested.</td><td>none</td></tr><tr><td>none</td><td>Untested.</td><td>none</td></tr><tr><td>none</td><td>Untested.</td><td>none</td></tr><tr><td>(lognot  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>FAIL: lognot requires 1 arg (65 65)</td><td>255</td></tr><tr><td>(ash  (q &quot;A&quot;)  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>FAIL: ash requires 2 args (65 65 65)</td><td>255</td></tr><tr><td>(lsh  (q &quot;A&quot;)  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>FAIL: ash requires 2 args (65 65 65)</td><td>255</td></tr><tr><td>(softfork  (q &quot;A&quot;)  (q &quot;A&quot;) )</td><td>()</td><td>0</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="conditions"></a>Conditions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#conditions" title="Direct link to heading">#</a></h3><table><thead><tr><th>Condition</th><th>CLVM Opcode</th></tr></thead><tbody><tr><td>AGG_SIG</td><td>50</td></tr><tr><td>CREATE_COIN</td><td>51</td></tr><tr><td>ASSERT_COIN_CONSUMED</td><td>52</td></tr><tr><td>ASSERT_MY_COIN_ID</td><td>53</td></tr><tr><td>ASSERT_TIME_EXCEEDS</td><td>54</td></tr><tr><td>ASSERT_BLOCK_INDEX_EXCEEDS</td><td>55</td></tr><tr><td>ASSERT_BLOCK_AGE_EXCEEDS</td><td>56</td></tr><tr><td>AGG_SIG_ME</td><td>57</td></tr><tr><td>ASSERT_FEE</td><td>58</td></tr></tbody></table></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Chia-Network/chialisp-web/edit/master/docs/ref/opcodes.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/ref/serialization"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« CLVM Reference Manual</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/faq"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ChiaLisp and CLVM FAQ Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#definitions" class="table-of-contents__link">Definitions</a></li><li><a href="#types" class="table-of-contents__link">Types</a><ul><li><a href="#byte-array" class="table-of-contents__link">Byte Array</a></li><li><a href="#unsigned-integer" class="table-of-contents__link">Unsigned Integer</a></li><li><a href="#signed-integer" class="table-of-contents__link">Signed Integer</a></li><li><a href="#bls-point" class="table-of-contents__link">BLS Point</a></li></ul></li><li><a href="#treeargs--program-arguments-and-argument-lookup" class="table-of-contents__link">Treeargs : Program Arguments, and Argument Lookup</a></li><li><a href="#quoting" class="table-of-contents__link">Quoting</a><ul><li><a href="#compilation-atom-syntax" class="table-of-contents__link">Compilation: Atom Syntax</a></li></ul></li><li><a href="#errors" class="table-of-contents__link">Errors</a></li><li><a href="#the-built-in-opcodes" class="table-of-contents__link">The built-in opcodes</a></li><li><a href="#list-operators" class="table-of-contents__link">List Operators</a></li><li><a href="#control-flow" class="table-of-contents__link">Control Flow</a></li><li><a href="#constants" class="table-of-contents__link">Constants</a></li><li><a href="#integer-operators" class="table-of-contents__link">Integer Operators</a></li><li><a href="#bit-operations" class="table-of-contents__link">Bit Operations</a></li><li><a href="#shifts" class="table-of-contents__link">Shifts</a></li><li><a href="#strings" class="table-of-contents__link">Strings</a></li><li><a href="#streaming-operators" class="table-of-contents__link">Streaming Operators</a></li><li><a href="#ecdsa-operators" class="table-of-contents__link">ECDSA operators</a></li><li><a href="#arithmetic-and-bitwise-identities" class="table-of-contents__link">Arithmetic and Bitwise Identities</a></li><li><a href="#arithmetic" class="table-of-contents__link">Arithmetic</a><ul><li><a href="#behaviour-of-nil-when-used-as-an-integer" class="table-of-contents__link">Behaviour of nil when used as an integer</a></li><li><a href="#behaviour-of-zero-when-used-as-a-value-that-may-be-checked-for-nil" class="table-of-contents__link">Behaviour of zero when used as a value that may be checked for nil</a></li></ul></li><li><a href="#detailed-behaviour-notes" class="table-of-contents__link">Detailed behaviour Notes</a></li><li><a href="#argument-checking-behaviour-with-fewer-or-more-args-than-required" class="table-of-contents__link">Argument Checking: Behaviour with fewer or more args than required</a><ul><li><a href="#opcode-list" class="table-of-contents__link">Opcode List</a></li><li><a href="#operator-results-when-called-with-zero-arguments" class="table-of-contents__link">Operator Results when called with zero arguments</a></li><li><a href="#operator-results-when-called-with-fewer-than-minimum-arguments" class="table-of-contents__link">Operator Results when called with fewer than minimum arguments</a></li><li><a href="#operator-results-when-called-with-too-many-arguments" class="table-of-contents__link">Operator Results when called with too many arguments</a></li><li><a href="#conditions" class="table-of-contents__link">Conditions</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">CLVM Basics</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/doc2/">Coins, Spends and Wallets</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://keybase.io/team/chia_network.public" target="_blank" rel="noopener noreferrer" class="footer__link-item">Keybase</a></li><li class="footer__item"><a href="https://twitter.com/chia_project" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.chia.net/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/Chia-Network/clvm" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 Chia Network Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.8fd1aa9c.js"></script>
<script src="/runtime~main.d2f90484.js"></script>
<script src="/main.38d5d74e.js"></script>
<script src="/1.174d8ed4.js"></script>
<script src="/2.9ec3edcc.js"></script>
<script src="/3.67d3266b.js"></script>
<script src="/1be78505.fd9da14b.js"></script>
<script src="/21.6b0fd9c9.js"></script>
<script src="/20ac7829.93204fbe.js"></script>
<script src="/17896441.b7f4ca2d.js"></script>
<script src="/e2f3f033.814b81be.js"></script>
</body>
</html>